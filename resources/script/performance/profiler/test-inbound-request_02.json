{
  "mapping": {
    "id": "57126",
    "identifier": "7szq1n1s",
    "name": "Mapping - geolocation - dictionary ",
    "mappingTopic": "testmapper/geodict",
    "mappingTopicSample": "testmapper/geodict",
    "targetAPI": "EVENT",
    "direction": "INBOUND",
    "sourceTemplate": "{\"version\":\"0\",\"id\":\"TID-987654-1234567890\",\"detail-type\":\"geolocation\",\"source\":\"myapp.orders\",\"account\":\"123451235123\",\"time\":\"2024-05-21T15:17:43Z\",\"region\":\"us-west-1\",\"detail\":{\"sensorAlternateId\":\"TID-987654-1234567890\",\"capabilityAlternateId\":\"geolocation\",\"measures\":[{\"latitude\":47.5381031,\"longitude\":14.885459,\"elevation\":745.3,\"accuracy\":5.4,\"origin\":\"gps\",\"gatewayidentifier\":\"TID-GWID-436521\",\"_time\":\"2022-04-29T12:01:23Z\"}]}}",
    "targetTemplate": "{\"source\":{\"id\":\"909090\"},\"text\":\"Geolocation -- Postion updated\",\"time\":\"2022-08-05T00:14:49.389+02:00\",\"type\":\"c8y_TestEvent\",\"c8y_Position\":{\"alt\":67,\"lng\":6.95173,\"lat\":51.151977},\"origin\":\"a\",\"accuracy\":\"a\",\"gatewayidentifier\":\"gatewayidentifier\",\"_time\":\"_time\"}",
    "mappingType": "JSON",
    "transformationType": "DEFAULT",
    "substitutions": [
      {
        "pathSource": "$split(detail.sensorAlternateId, '-')[-1]",
        "pathTarget": "_IDENTITY_.externalId",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "time",
        "pathTarget": "time",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "$.detail.capabilityAlternateId = 'geolocation' ? 'c8y_LocationUpdate' : detail.capabilityAlternateId",
        "pathTarget": "type",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "detail.measures[0].latitude",
        "pathTarget": "c8y_Position.lat",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "detail.measures[0].longitude",
        "pathTarget": "c8y_Position.lng",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "detail.measures[0].elevation",
        "pathTarget": "c8y_Position.alt",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "detail.measures[0].accuracy",
        "pathTarget": "accuracy",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "detail.measures[0].origin",
        "pathTarget": "origin",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "detail.measures[0].gatewayidentifier",
        "pathTarget": "gatewayidentifier",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "detail.measures[0]._time",
        "pathTarget": "_time",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      }
    ],
    "active": false,
    "debug": false,
    "tested": true,
    "supportsMessageContext": false,
    "eventWithAttachment": false,
    "createNonExistingDevice": true,
    "updateExistingDevice": false,
    "autoAckOperation": true,
    "useExternalId": true,
    "externalIdType": "c8y_Serial",
    "snoopStatus": "NONE",
    "snoopedTemplates": [],
    "maxFailureCount": 0,
    "qos": "AT_MOST_ONCE",
    "lastUpdate": 1761752628421,
    "transformationAsCode": false,
    "substitutionAsCode": false
  },
  "payload": "{\"version\": \"0\",  \"id\": \"TID-987654-1234567890\",  \"detail-type\": \"geolocation\",  \"source\": \"myapp.orders\",  \"account\": \"123451235123\",  \"region\": \"us-west-1\",  \"detail\": {    \"sensorAlternateId\": \"TID-987654-1234567890\",    \"capabilityAlternateId\": \"geolocation\",    \"measures\": [      {        \"latitude\": 47.5381031,        \"longitude\": 14.885459,        \"elevation\": 745.3,\"accuracy\": 5.4,\"origin\": \"gps\",\"gatewayidentifier\": \"TID-GWID-436521\",\"_time\": \"2022-04-29T12:01:23Z\"}]}}",
  "send": false
}