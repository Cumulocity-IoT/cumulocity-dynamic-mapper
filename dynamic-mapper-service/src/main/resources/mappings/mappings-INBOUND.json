[
  {
    "id": "47121600685",
    "identifier": "l19zjk",
    "name": "Mapping with Filter + Expression",
    "mappingTopic": "/plant1/+/+",
    "mappingTopicSample": "/plant1/line1/dev4711",
    "targetAPI": "MEASUREMENT",
    "direction": "INBOUND",
    "sourceTemplate": "{\"value\":100}",
    "targetTemplate": "{\"measure1_Type\":{\"V\":{\"value\":110,\"unit\":\"C\"}},\"time\":\"2022-08-05T00:14:49.389+02:00\",\"type\":\"c8y_TemperatureMeasurement\"}",
    "mappingType": "JSON",
    "transformationType": "JSONATA",
    "substitutions": [
      {
        "pathSource": "_TOPIC_LEVEL_[1]&\"_\"&_TOPIC_LEVEL_[2]&\"_\"&$substringBefore(_TOPIC_LEVEL_[3],\"_\")",
        "pathTarget": "_IDENTITY_.externalId",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "$substringAfter(_TOPIC_LEVEL_[3],\"_\")",
        "pathTarget": "type",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "$now()",
        "pathTarget": "time",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "value",
        "pathTarget": "measure1_Type.V.value",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      }
    ],
    "active": true,
    "debug": false,
    "createNonExistingDevice": true,
    "updateExistingDevice": false,
    "autoAckOperation": true,
    "useExternalId": true,
    "externalIdType": "c8y_Serial",
    "snoopStatus": "NONE",
    "snoopedTemplates": [],
    "filterMapping": "value > 50",
    "qos": "AT_LEAST_ONCE",
    "lastUpdate": 1744101788851
  },
  {
    "id": "30121604644",
    "identifier": "jrr12x",
    "name": "Mapping with multi values",
    "mappingTopic": "devices/+",
    "mappingTopicSample": "devices/dev4711",
    "targetAPI": "MEASUREMENT",
    "direction": "INBOUND",
    "sourceTemplate": "{\"mea\":[{\"tid\":\"uuid_01\",\"psid\":\"Crest\",\"devicePath\":\"path01_80_X03_VVB001StatusB_Crest\",\"values\":[{\"value\":4.6,\"timestamp\":1744103621000}]},{\"tid\":\"uuid_02\",\"psid\":\"Crest\",\"devicePath\":\"path01_80_X03_VVB001StatusB_Crest\",\"values\":[{\"value\":5.6,\"timestamp\":1744103648000}]}]}",
    "targetTemplate": "{\"c8y_ProcessLoadMeasurement\":{\"L\":{\"value\":110,\"unit\":\"%\"}},\"time\":\"2022-08-05T00:14:49.389+02:00\",\"source\":{\"id\":\"909090\"},\"type\":\"c8y_ProcessLoadMeasurement\"}",
    "mappingType": "JSON",
    "transformationType": "JSONATA",
    "substitutions": [
      {
        "pathSource": "_TOPIC_LEVEL_[1]",
        "pathTarget": "_IDENTITY_.externalId",
        "repairStrategy": "DEFAULT",
        "expandArray": false
      },
      {
        "pathSource": "mea.values[0].value",
        "pathTarget": "c8y_ProcessLoadMeasurement.L.value",
        "repairStrategy": "DEFAULT",
        "expandArray": true
      },
      {
        "pathSource": "$map($map(mea.values[0].timestamp, $number), function($v, $i, $a) { $fromMillis($v) })",
        "pathTarget": "time",
        "repairStrategy": "DEFAULT",
        "expandArray": true
      }
    ],
    "active": false,
    "debug": false,
    "createNonExistingDevice": true,
    "updateExistingDevice": false,
    "autoAckOperation": true,
    "useExternalId": true,
    "externalIdType": "c8y_Serial",
    "snoopStatus": "NONE",
    "snoopedTemplates": [],
    "qos": "AT_LEAST_ONCE",
    "lastUpdate": 1744100522097
  },
  {
    "id": "90121774614",
    "identifier": "73ch32us",
    "name": "Smart Function example",
    "mappingTopic": "device/+/temp",
    "mappingTopicSample": "device/berlin_01/temp",
    "targetAPI": "MEASUREMENT",
    "direction": "INBOUND",
    "sourceTemplate": "{\"Temperature\":{\"value\":110,\"unit\":\"C\"},\"time\":\"2022-08-05T00:14:49.389+02:00\",\"deviceId\":\"909090\"}",
    "targetTemplate": "{\"c8y_TemperatureMeasurement\":{\"T\":{\"value\":110,\"unit\":\"C\"}},\"time\":\"2022-08-05T00:14:49.389+02:00\",\"type\":\"c8y_TemperatureMeasurement\"}",
    "mappingType": "JSON",
    "transformationType": "SMART_FUNCTION",
    "substitutions": [],
    "active": false,
    "debug": false,
    "eventWithAttachment": false,
    "createNonExistingDevice": true,
    "updateExistingDevice": false,
    "autoAckOperation": true,
    "useExternalId": true,
    "externalIdType": "c8y_Serial",
    "snoopStatus": "NONE",
    "snoopedTemplates": [],
    "filterMapping": "",
    "maxFailureCount": 0,
    "qos": "AT_LEAST_ONCE",
    "code": "LyoqCiAqIEBuYW1lIFNtYXJ0IEZ1bmN0aW9uIHNhbXBsZSDigJQgdGVtcGVyYXR1cmUgbW9uaXRvcmluZyB3aXRoIGVucmljaG1lbnQKICogQGRlc2NyaXB0aW9uCiAqICAgRGVtb25zdHJhdGVzIHRoZSBrZXkgU21hcnQgRnVuY3Rpb24gY2FwYWJpbGl0aWVzIGluIG9uZSBleGFtcGxlOgogKiAgIC0gRGV2aWNlIGlkZW50aWZpY2F0aW9uIHZpYSBjbGllbnRJZCBvciBNUVRUIHRvcGljIGxldmVsCiAqICAgLSBJbnZlbnRvcnkgZW5yaWNobWVudDogcmVhZCBkZXZpY2Utc3BlY2lmaWMgdGhyZXNob2xkIGZyb20gbWFuYWdlZCBvYmplY3QKICogICAtIFBlcnNpc3RlbnQgc3RhdGU6IGNvdW50IG1lc3NhZ2VzIGFuZCB0cmFjayBjb25zZWN1dGl2ZSBhbGVydCBzdHJlYWsKICogICAtIENvbmRpdGlvbmFsIG91dHB1dDogYWx3YXlzIGVtaXQgYSBtZWFzdXJlbWVudDsgcmFpc2UgYW4gYWxhcm0gb25seSBvbgogKiAgICAgdGhlIGZpcnN0IGNvbnNlY3V0aXZlIHRocmVzaG9sZCBicmVhY2ggKGF2b2lkcyBkdXBsaWNhdGUgYWxhcm1zKQogKiBAdGVtcGxhdGVUeXBlIElOQk9VTkRfU01BUlRfRlVOQ1RJT04KICogQGRpcmVjdGlvbiBJTkJPVU5ECiAqIEBkZWZhdWx0VGVtcGxhdGUgdHJ1ZQogKiBAaW50ZXJuYWwgdHJ1ZQogKiBAcmVhZG9ubHkgdHJ1ZQogKiBFeHBlY3RlZCBNUVRUIHRvcGljOiAgZGV2aWNlcy97ZXh0ZXJuYWxJZH0vdGVtcGVyYXR1cmUKICogRXhwZWN0ZWQgSlNPTiBwYXlsb2FkOgogKiB7CiAqICAgIlRlbXBlcmF0dXJlIjogeyAidmFsdWUiOiA0NS41LCAidW5pdCI6ICLCsEMiIH0sCiAqICAgImh1bWlkaXR5IjogNjUKICogfQogKgogKiBPcHRpb25hbCBtYW5hZ2VkIG9iamVjdCBmcmFnbWVudCBvbiB0aGUgZGV2aWNlIChjb25maWd1cmVzIHRocmVzaG9sZCk6CiAqIHsKICogICAiYzh5X1RlbXBlcmF0dXJlVGhyZXNob2xkIjogeyAiaGlnaCI6IDQwLjAgfQogKiB9CiAqLwpmdW5jdGlvbiBvbk1lc3NhZ2UobXNnLCBjb250ZXh0KSB7CiAgICB2YXIgcGF5bG9hZCA9IG1zZy5nZXRQYXlsb2FkKCk7CgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gMS4gSWRlbnRpZnkgdGhlIGRldmljZQogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdmFyIHN0YXRlID0gIGNvbnRleHQuZ2V0U3RhdGVBbGwoKTsKICAgIGNvbnNvbGUubG9nKCJTdGF0ZSIsIHN0YXRlKTsKICAgIGNvbnN0IGV4dGVybmFsSWRGcm9tVG9waWMgPSBzdGF0ZVsidG9waWMiXS5zcGxpdCgiLyIpWzFdOwogICAgY29uc29sZS5sb2coIkV4dGVybmFsIElkIGZyb20gdG9waWM6IiArIGV4dGVybmFsSWRGcm9tVG9waWMpOwogICAgdmFyIGV4dGVybmFsSWQgPSBzdGF0ZVsidG9waWMiXS5zcGxpdCgiLyIpWzFdOwogICAgaWYgKCFleHRlcm5hbElkKSB7CiAgICAgICAgY29udGV4dC5hZGRMb2dNZXNzYWdlKCJDYW5ub3QgZGV0ZXJtaW5lIGRldmljZSBpZGVudGl0eSDigJQgbWVzc2FnZSBkcm9wcGVkIik7CiAgICAgICAgcmV0dXJuIFtdOwogICAgfQoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDIuIFZhbGlkYXRlIHJlcXVpcmVkIHBheWxvYWQgZmllbGRzIGVhcmx5CiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB2YXIgdGVtcERhdGEgPSBwYXlsb2FkWyJUZW1wZXJhdHVyZSJdOwogICAgaWYgKCF0ZW1wRGF0YSB8fCB0ZW1wRGF0YVsidmFsdWUiXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgY29udGV4dC5hZGRMb2dNZXNzYWdlKCJNaXNzaW5nICdUZW1wZXJhdHVyZScgaW4gcGF5bG9hZCBmb3IgZGV2aWNlOiAiICsgZXh0ZXJuYWxJZCk7CiAgICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgdmFyIHRlbXBlcmF0dXJlID0gdGVtcERhdGFbInZhbHVlIl07CiAgICB2YXIgdW5pdCAgICAgICAgPSB0ZW1wRGF0YVsidW5pdCJdIHx8ICLCsEMiOwoKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIDMuIEVucmljaCBmcm9tIGludmVudG9yeTogbG9vayB1cCBkZXZpY2Utc3BlY2lmaWMgYWxlcnQgdGhyZXNob2xkLgogICAgLy8gICAgZ2V0TWFuYWdlZE9iamVjdEJ5RXh0ZXJuYWxJZCByZXR1cm5zIHRoZSBmdWxsIG1hbmFnZWQgb2JqZWN0IG9yCiAgICAvLyAgICBudWxsIHdoZW4gdGhlIGRldmljZSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCBpbiBpbnZlbnRvcnkgeWV0LgogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdmFyIHRocmVzaG9sZCA9IDQwLjA7IC8vIHNlbnNpYmxlIGRlZmF1bHQKICAgIHZhciBkZXZpY2UgPSBjb250ZXh0LmdldE1hbmFnZWRPYmplY3RCeUV4dGVybmFsSWQoeyBleHRlcm5hbElkOiBleHRlcm5hbElkLCB0eXBlOiAiYzh5X1NlcmlhbCIgfSk7CiAgICBpZiAoZGV2aWNlKSB7CiAgICAgICAgdmFyIHRocmVzaG9sZENmZyA9IGRldmljZVsiYzh5X1RlbXBlcmF0dXJlVGhyZXNob2xkIl07CiAgICAgICAgaWYgKHRocmVzaG9sZENmZyAmJiB0aHJlc2hvbGRDZmdbImhpZ2giXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHRocmVzaG9sZCA9IHRocmVzaG9sZENmZ1siaGlnaCJdOwogICAgICAgICAgICBjb25zb2xlLmxvZygiVXNpbmcgZGV2aWNlIHRocmVzaG9sZDogIiArIHRocmVzaG9sZCArIHVuaXQpOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgY29udGV4dC5hZGRMb2dNZXNzYWdlKCJEZXZpY2Ugbm90IHlldCBpbiBpbnZlbnRvcnksIHVzaW5nIGRlZmF1bHQgdGhyZXNob2xkICIgKyB0aHJlc2hvbGQgKyB1bml0KTsKICAgIH0KCiAgICB2YXIgZXhjZWVkZWQgICAgPSB0ZW1wZXJhdHVyZSA+IHRocmVzaG9sZDsKCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyA0LiBCdWlsZCBvdXRwdXQgb2JqZWN0cwogICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgdmFyIHJlc3VsdHMgPSBbXTsKCiAgICAvLyA0YS4gQWx3YXlzIGVtaXQgYSB0ZW1wZXJhdHVyZSBtZWFzdXJlbWVudAogICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICBjdW11bG9jaXR5VHlwZTogIm1lYXN1cmVtZW50IiwKICAgICAgICBhY3Rpb246ICJjcmVhdGUiLAogICAgICAgIHBheWxvYWQ6IHsKICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICB0eXBlOiAiYzh5X1RlbXBlcmF0dXJlTWVhc3VyZW1lbnQiLAogICAgICAgICAgICBjOHlfVGVtcGVyYXR1cmVNZWFzdXJlbWVudDogewogICAgICAgICAgICAgICAgVDogeyB2YWx1ZTogdGVtcGVyYXR1cmUsIHVuaXQ6IHVuaXQgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBleHRlcm5hbFNvdXJjZTogW3sgdHlwZTogImM4eV9TZXJpYWwiLCBleHRlcm5hbElkOiBleHRlcm5hbElkIH1dCiAgICB9KTsKCiAgICAvLyA0Yi4gUmFpc2UgYW4gYWxhcm0KICAgIGlmIChleGNlZWRlZCkgewogICAgICAgIGNvbnRleHQuYWRkTG9nTWVzc2FnZSgKICAgICAgICAgICAgIlRocmVzaG9sZCBicmVhY2ggb24gIiArIGV4dGVybmFsSWQgKwogICAgICAgICAgICAiOiAiICsgdGVtcGVyYXR1cmUgKyB1bml0ICsgIiA+ICIgKyB0aHJlc2hvbGQgKyB1bml0CiAgICAgICAgKTsKICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgICBjdW11bG9jaXR5VHlwZTogImFsYXJtIiwKICAgICAgICAgICAgYWN0aW9uOiAiY3JlYXRlIiwKICAgICAgICAgICAgcGF5bG9hZDogewogICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgdHlwZTogImM4eV9UZW1wZXJhdHVyZVRocmVzaG9sZEFsYXJtIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJUZW1wZXJhdHVyZSAiICsgdGVtcGVyYXR1cmUgKyB1bml0ICsKICAgICAgICAgICAgICAgICAgICAgICIgZXhjZWVkcyB0aHJlc2hvbGQgb2YgIiArIHRocmVzaG9sZCArIHVuaXQsCiAgICAgICAgICAgICAgICBzZXZlcml0eTogIk1BSk9SIiwKICAgICAgICAgICAgICAgIHN0YXR1czogIkFDVElWRSIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXh0ZXJuYWxTb3VyY2U6IFt7IHR5cGU6ICJjOHlfU2VyaWFsIiwgZXh0ZXJuYWxJZDogZXh0ZXJuYWxJZCB9XQogICAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiByZXN1bHRzOwp9Cg==",
    "lastUpdate": 1759917840151
  }
]